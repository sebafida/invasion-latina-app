{"dependencies":[{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":39,"index":66}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":69,"index":136}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _axios = require(_dependencyMap[0], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[1], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  // Get backend URL from environment\n  // Try multiple sources for the backend URL\n  const getBackendUrl = () => {\n    // 1. Try process.env (EAS Build environment variables)\n    if (process.env.EXPO_PUBLIC_BACKEND_URL) {\n      return process.env.EXPO_PUBLIC_BACKEND_URL;\n    }\n\n    // 2. Try Constants.expoConfig.extra\n    if (Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL) {\n      return Constants.default.expoConfig.extra.EXPO_PUBLIC_BACKEND_URL;\n    }\n\n    // 3. Fallback to hardcoded URL for production\n    return 'https://invasion-latina.preview.emergentagent.com';\n  };\n  const BACKEND_URL = getBackendUrl();\n  console.log('API Config - Backend URL:', BACKEND_URL);\n\n  // Create axios instance\n  const api = axios.default.create({\n    baseURL: `${BACKEND_URL}/api`,\n    timeout: 30000,\n    // 30 secondes au lieu de 10\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Add auth token to requests\n  api.interceptors.request.use(async config => {\n    const token = await AsyncStorage.default.getItem('auth_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Handle response errors\n  api.interceptors.response.use(response => response, async error => {\n    if (error.response?.status === 401) {\n      // Token expired or invalid\n      await AsyncStorage.default.removeItem('auth_token');\n      // Redirect to login\n    }\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":80,"map":[[12,2,62,0,"Object"],[12,8,62,0],[12,9,62,0,"defineProperty"],[12,23,62,0],[12,24,62,0,"exports"],[12,31,62,0],[13,4,62,0,"enumerable"],[13,14,62,0],[14,4,62,0,"get"],[14,7,62,0],[14,18,62,0,"get"],[14,19,62,0],[15,6,62,0],[15,13,62,0,"_default"],[15,21,62,0],[16,4,62,0],[17,2,62,0],[18,2,27,0,"Object"],[18,8,27,0],[18,9,27,0,"defineProperty"],[18,23,27,0],[18,24,27,0,"exports"],[18,31,27,0],[19,4,27,0,"enumerable"],[19,14,27,0],[20,4,27,0,"get"],[20,7,27,0],[20,18,27,0,"get"],[20,19,27,0],[21,6,27,0],[21,13,27,0,"api"],[21,16,27,0],[22,4,27,0],[23,2,27,0],[24,2,1,0],[24,6,1,0,"_axios"],[24,12,1,0],[24,15,1,0,"require"],[24,22,1,0],[24,23,1,0,"_dependencyMap"],[24,37,1,0],[25,2,1,0],[25,6,1,0,"axios"],[25,11,1,0],[25,14,1,0,"_interopDefault"],[25,29,1,0],[25,30,1,0,"_axios"],[25,36,1,0],[26,2,2,0],[26,6,2,0,"_expoConstants"],[26,20,2,0],[26,23,2,0,"require"],[26,30,2,0],[26,31,2,0,"_dependencyMap"],[26,45,2,0],[27,2,2,0],[27,6,2,0,"Constants"],[27,15,2,0],[27,18,2,0,"_interopDefault"],[27,33,2,0],[27,34,2,0,"_expoConstants"],[27,48,2,0],[28,2,3,0],[28,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[28,42,3,0],[28,45,3,0,"require"],[28,52,3,0],[28,53,3,0,"_dependencyMap"],[28,67,3,0],[29,2,3,0],[29,6,3,0,"AsyncStorage"],[29,18,3,0],[29,21,3,0,"_interopDefault"],[29,36,3,0],[29,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[29,73,3,0],[30,2,5,0],[31,2,6,0],[32,2,7,0],[32,8,7,6,"getBackendUrl"],[32,21,7,19],[32,24,7,22,"getBackendUrl"],[32,25,7,22],[32,30,7,28],[33,4,8,2],[34,4,9,2],[34,8,9,6,"process"],[34,15,9,13],[34,16,9,14,"env"],[34,19,9,17],[34,20,9,18,"EXPO_PUBLIC_BACKEND_URL"],[34,43,9,41],[34,45,9,43],[35,6,10,4],[35,13,10,11,"process"],[35,20,10,18],[35,21,10,19,"env"],[35,24,10,22],[35,25,10,23,"EXPO_PUBLIC_BACKEND_URL"],[35,48,10,46],[36,4,11,2],[38,4,13,2],[39,4,14,2],[39,8,14,6,"Constants"],[39,17,14,15],[39,18,14,15,"default"],[39,25,14,15],[39,26,14,16,"expoConfig"],[39,36,14,26],[39,38,14,28,"extra"],[39,43,14,33],[39,45,14,35,"EXPO_PUBLIC_BACKEND_URL"],[39,68,14,58],[39,70,14,60],[40,6,15,4],[40,13,15,11,"Constants"],[40,22,15,20],[40,23,15,20,"default"],[40,30,15,20],[40,31,15,21,"expoConfig"],[40,41,15,31],[40,42,15,32,"extra"],[40,47,15,37],[40,48,15,38,"EXPO_PUBLIC_BACKEND_URL"],[40,71,15,61],[41,4,16,2],[43,4,18,2],[44,4,19,2],[44,11,19,9],[44,62,19,60],[45,2,20,0],[45,3,20,1],[46,2,22,0],[46,8,22,6,"BACKEND_URL"],[46,19,22,17],[46,22,22,20,"getBackendUrl"],[46,35,22,33],[46,36,22,34],[46,37,22,35],[47,2,24,0,"console"],[47,9,24,7],[47,10,24,8,"log"],[47,13,24,11],[47,14,24,12],[47,41,24,39],[47,43,24,41,"BACKEND_URL"],[47,54,24,52],[47,55,24,53],[49,2,26,0],[50,2,27,7],[50,8,27,13,"api"],[50,11,27,16],[50,14,27,19,"axios"],[50,19,27,24],[50,20,27,24,"default"],[50,27,27,24],[50,28,27,25,"create"],[50,34,27,31],[50,35,27,32],[51,4,28,2,"baseURL"],[51,11,28,9],[51,13,28,11],[51,16,28,14,"BACKEND_URL"],[51,27,28,25],[51,33,28,31],[52,4,29,2,"timeout"],[52,11,29,9],[52,13,29,11],[52,18,29,16],[53,4,29,18],[54,4,30,2,"headers"],[54,11,30,9],[54,13,30,11],[55,6,31,4],[55,20,31,18],[55,22,31,20],[56,4,32,2],[57,2,33,0],[57,3,33,1],[57,4,33,2],[59,2,35,0],[60,2,36,0,"api"],[60,5,36,3],[60,6,36,4,"interceptors"],[60,18,36,16],[60,19,36,17,"request"],[60,26,36,24],[60,27,36,25,"use"],[60,30,36,28],[60,31,37,2],[60,37,37,9,"config"],[60,43,37,15],[60,47,37,20],[61,4,38,4],[61,10,38,10,"token"],[61,15,38,15],[61,18,38,18],[61,24,38,24,"AsyncStorage"],[61,36,38,36],[61,37,38,36,"default"],[61,44,38,36],[61,45,38,37,"getItem"],[61,52,38,44],[61,53,38,45],[61,65,38,57],[61,66,38,58],[62,4,39,4],[62,8,39,8,"token"],[62,13,39,13],[62,15,39,15],[63,6,40,6,"config"],[63,12,40,12],[63,13,40,13,"headers"],[63,20,40,20],[63,21,40,21,"Authorization"],[63,34,40,34],[63,37,40,37],[63,47,40,47,"token"],[63,52,40,52],[63,54,40,54],[64,4,41,4],[65,4,42,4],[65,11,42,11,"config"],[65,17,42,17],[66,2,43,2],[66,3,43,3],[66,5,44,3,"error"],[66,10,44,8],[66,14,44,13],[67,4,45,4],[67,11,45,11,"Promise"],[67,18,45,18],[67,19,45,19,"reject"],[67,25,45,25],[67,26,45,26,"error"],[67,31,45,31],[67,32,45,32],[68,2,46,2],[68,3,47,0],[68,4,47,1],[70,2,49,0],[71,2,50,0,"api"],[71,5,50,3],[71,6,50,4,"interceptors"],[71,18,50,16],[71,19,50,17,"response"],[71,27,50,25],[71,28,50,26,"use"],[71,31,50,29],[71,32,51,3,"response"],[71,40,51,11],[71,44,51,16,"response"],[71,52,51,24],[71,54,52,2],[71,60,52,9,"error"],[71,65,52,14],[71,69,52,19],[72,4,53,4],[72,8,53,8,"error"],[72,13,53,13],[72,14,53,14,"response"],[72,22,53,22],[72,24,53,24,"status"],[72,30,53,30],[72,35,53,35],[72,38,53,38],[72,40,53,40],[73,6,54,6],[74,6,55,6],[74,12,55,12,"AsyncStorage"],[74,24,55,24],[74,25,55,24,"default"],[74,32,55,24],[74,33,55,25,"removeItem"],[74,43,55,35],[74,44,55,36],[74,56,55,48],[74,57,55,49],[75,6,56,6],[76,4,57,4],[77,4,58,4],[77,11,58,11,"Promise"],[77,18,58,18],[77,19,58,19,"reject"],[77,25,58,25],[77,26,58,26,"error"],[77,31,58,31],[77,32,58,32],[78,2,59,2],[78,3,60,0],[78,4,60,1],[79,2,62,0],[79,6,62,0,"_default"],[79,14,62,0],[79,17,62,15,"api"],[79,20,62,18],[80,0,62,19],[80,3]],"functionMap":{"names":["<global>","getBackendUrl","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1"],"mappings":"AAA;sBCM;CDa;EEiB;GFM;EGC;GHE;EIK,sBJ;EKC;GLO"},"hasCjsExports":false},"type":"js/module"}]}