{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":32,"index":181}}],"key":"V94urzZZSfzzXHrNxWFShT8IuQo=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _configApi = require(_dependencyMap[2], \"../config/api\");\n  var api = _interopDefault(_configApi);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [token, setToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const [isAuthenticated, setIsAuthenticated] = (0, _react.useState)(false);\n    const login = async (email, password) => {\n      try {\n        setIsLoading(true);\n        const response = await api.default.post('/auth/login', {\n          email,\n          password\n        });\n        const {\n          access_token,\n          user_id,\n          name,\n          role\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        setToken(access_token);\n        setUser({\n          id: user_id,\n          email,\n          name,\n          role,\n          loyalty_points: 0,\n          badges: []\n        });\n        setIsAuthenticated(true);\n        await loadUser();\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Login failed');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const register = async (name, email, password) => {\n      try {\n        setIsLoading(true);\n        const response = await api.default.post('/auth/register', {\n          name,\n          email,\n          password,\n          role: 'user'\n        });\n        const {\n          access_token,\n          user_id\n        } = response.data;\n        await AsyncStorage.default.setItem('auth_token', access_token);\n        setToken(access_token);\n        setUser({\n          id: user_id,\n          email,\n          name,\n          role: 'user',\n          loyalty_points: 0,\n          badges: []\n        });\n        setIsAuthenticated(true);\n      } catch (error) {\n        throw new Error(error.response?.data?.detail || 'Registration failed');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const logout = async () => {\n      await AsyncStorage.default.removeItem('auth_token');\n      setUser(null);\n      setToken(null);\n      setIsAuthenticated(false);\n    };\n    const loadUser = async () => {\n      try {\n        const storedToken = await AsyncStorage.default.getItem('auth_token');\n        if (!storedToken) {\n          setIsAuthenticated(false);\n          setIsLoading(false);\n          return;\n        }\n        setIsLoading(true);\n        const response = await api.default.get('/auth/me');\n        setUser(response.data);\n        setToken(storedToken);\n        setIsAuthenticated(true);\n      } catch (error) {\n        await AsyncStorage.default.removeItem('auth_token');\n        setUser(null);\n        setToken(null);\n        setIsAuthenticated(false);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    (0, _react.useEffect)(() => {\n      loadUser();\n    }, []);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        token,\n        isLoading,\n        isAuthenticated,\n        login,\n        register,\n        logout,\n        loadUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":156,"map":[[13,2,27,0,"Object"],[13,8,27,0],[13,9,27,0,"defineProperty"],[13,23,27,0],[13,24,27,0,"exports"],[13,31,27,0],[14,4,27,0,"enumerable"],[14,14,27,0],[15,4,27,0,"get"],[15,7,27,0],[15,18,27,0,"get"],[15,19,27,0],[16,6,27,0],[16,13,27,0,"AuthProvider"],[16,25,27,0],[17,4,27,0],[18,2,27,0],[19,2,130,0,"Object"],[19,8,130,0],[19,9,130,0,"defineProperty"],[19,23,130,0],[19,24,130,0,"exports"],[19,31,130,0],[20,4,130,0,"enumerable"],[20,14,130,0],[21,4,130,0,"get"],[21,7,130,0],[21,18,130,0,"get"],[21,19,130,0],[22,6,130,0],[22,13,130,0,"useAuth"],[22,20,130,0],[23,4,130,0],[24,2,130,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_configApi"],[28,16,3,0],[28,19,3,0,"require"],[28,26,3,0],[28,27,3,0,"_dependencyMap"],[28,41,3,0],[29,2,3,0],[29,6,3,0,"api"],[29,9,3,0],[29,12,3,0,"_interopDefault"],[29,27,3,0],[29,28,3,0,"_configApi"],[29,38,3,0],[30,2,3,32],[30,6,3,32,"_reactJsxDevRuntime"],[30,25,3,32],[30,28,3,32,"require"],[30,35,3,32],[30,36,3,32,"_dependencyMap"],[30,50,3,32],[31,2,25,0],[31,8,25,6,"AuthContext"],[31,19,25,17],[31,35,25,20],[31,39,25,20,"createContext"],[31,45,25,33],[31,46,25,33,"createContext"],[31,59,25,33],[31,61,25,63,"undefined"],[31,70,25,72],[31,71,25,73],[32,2,27,7],[32,8,27,13,"AuthProvider"],[32,20,27,66],[32,23,27,69,"AuthProvider"],[32,24,27,70],[33,4,27,72,"children"],[34,2,27,81],[34,3,27,82],[34,8,27,87],[35,4,28,2],[35,10,28,8],[35,11,28,9,"user"],[35,15,28,13],[35,17,28,15,"setUser"],[35,24,28,22],[35,25,28,23],[35,28,28,26],[35,32,28,26,"useState"],[35,38,28,34],[35,39,28,34,"useState"],[35,47,28,34],[35,49,28,48],[35,53,28,52],[35,54,28,53],[36,4,29,2],[36,10,29,8],[36,11,29,9,"token"],[36,16,29,14],[36,18,29,16,"setToken"],[36,26,29,24],[36,27,29,25],[36,30,29,28],[36,34,29,28,"useState"],[36,40,29,36],[36,41,29,36,"useState"],[36,49,29,36],[36,51,29,52],[36,55,29,56],[36,56,29,57],[37,4,30,2],[37,10,30,8],[37,11,30,9,"isLoading"],[37,20,30,18],[37,22,30,20,"setIsLoading"],[37,34,30,32],[37,35,30,33],[37,38,30,36],[37,42,30,36,"useState"],[37,48,30,44],[37,49,30,44,"useState"],[37,57,30,44],[37,59,30,45],[37,64,30,50],[37,65,30,51],[38,4,31,2],[38,10,31,8],[38,11,31,9,"isAuthenticated"],[38,26,31,24],[38,28,31,26,"setIsAuthenticated"],[38,46,31,44],[38,47,31,45],[38,50,31,48],[38,54,31,48,"useState"],[38,60,31,56],[38,61,31,56,"useState"],[38,69,31,56],[38,71,31,57],[38,76,31,62],[38,77,31,63],[39,4,33,2],[39,10,33,8,"login"],[39,15,33,13],[39,18,33,16],[39,24,33,16,"login"],[39,25,33,23,"email"],[39,30,33,36],[39,32,33,38,"password"],[39,40,33,54],[39,45,33,59],[40,6,34,4],[40,10,34,8],[41,8,35,6,"setIsLoading"],[41,20,35,18],[41,21,35,19],[41,25,35,23],[41,26,35,24],[42,8,36,6],[42,14,36,12,"response"],[42,22,36,20],[42,25,36,23],[42,31,36,29,"api"],[42,34,36,32],[42,35,36,32,"default"],[42,42,36,32],[42,43,36,33,"post"],[42,47,36,37],[42,48,36,38],[42,61,36,51],[42,63,36,53],[43,10,36,55,"email"],[43,15,36,60],[44,10,36,62,"password"],[45,8,36,71],[45,9,36,72],[45,10,36,73],[46,8,37,6],[46,14,37,12],[47,10,37,14,"access_token"],[47,22,37,26],[48,10,37,28,"user_id"],[48,17,37,35],[49,10,37,37,"name"],[49,14,37,41],[50,10,37,43,"role"],[51,8,37,48],[51,9,37,49],[51,12,37,52,"response"],[51,20,37,60],[51,21,37,61,"data"],[51,25,37,65],[52,8,39,6],[52,14,39,12,"AsyncStorage"],[52,26,39,24],[52,27,39,24,"default"],[52,34,39,24],[52,35,39,25,"setItem"],[52,42,39,32],[52,43,39,33],[52,55,39,45],[52,57,39,47,"access_token"],[52,69,39,59],[52,70,39,60],[53,8,41,6,"setToken"],[53,16,41,14],[53,17,41,15,"access_token"],[53,29,41,27],[53,30,41,28],[54,8,42,6,"setUser"],[54,15,42,13],[54,16,42,14],[55,10,42,16,"id"],[55,12,42,18],[55,14,42,20,"user_id"],[55,21,42,27],[56,10,42,29,"email"],[56,15,42,34],[57,10,42,36,"name"],[57,14,42,40],[58,10,42,42,"role"],[58,14,42,46],[59,10,42,48,"loyalty_points"],[59,24,42,62],[59,26,42,64],[59,27,42,65],[60,10,42,67,"badges"],[60,16,42,73],[60,18,42,75],[61,8,42,78],[61,9,42,79],[61,10,42,80],[62,8,43,6,"setIsAuthenticated"],[62,26,43,24],[62,27,43,25],[62,31,43,29],[62,32,43,30],[63,8,45,6],[63,14,45,12,"loadUser"],[63,22,45,20],[63,23,45,21],[63,24,45,22],[64,6,46,4],[64,7,46,5],[64,8,46,6],[64,15,46,13,"error"],[64,20,46,23],[64,22,46,25],[65,8,47,6],[65,14,47,12],[65,18,47,16,"Error"],[65,23,47,21],[65,24,47,22,"error"],[65,29,47,27],[65,30,47,28,"response"],[65,38,47,36],[65,40,47,38,"data"],[65,44,47,42],[65,46,47,44,"detail"],[65,52,47,50],[65,56,47,54],[65,70,47,68],[65,71,47,69],[66,6,48,4],[66,7,48,5],[66,16,48,14],[67,8,49,6,"setIsLoading"],[67,20,49,18],[67,21,49,19],[67,26,49,24],[67,27,49,25],[68,6,50,4],[69,4,51,2],[69,5,51,3],[70,4,53,2],[70,10,53,8,"register"],[70,18,53,16],[70,21,53,19],[70,27,53,19,"register"],[70,28,53,26,"name"],[70,32,53,38],[70,34,53,40,"email"],[70,39,53,53],[70,41,53,55,"password"],[70,49,53,71],[70,54,53,76],[71,6,54,4],[71,10,54,8],[72,8,55,6,"setIsLoading"],[72,20,55,18],[72,21,55,19],[72,25,55,23],[72,26,55,24],[73,8,56,6],[73,14,56,12,"response"],[73,22,56,20],[73,25,56,23],[73,31,56,29,"api"],[73,34,56,32],[73,35,56,32,"default"],[73,42,56,32],[73,43,56,33,"post"],[73,47,56,37],[73,48,56,38],[73,64,56,54],[73,66,56,56],[74,10,57,8,"name"],[74,14,57,12],[75,10,58,8,"email"],[75,15,58,13],[76,10,59,8,"password"],[76,18,59,16],[77,10,60,8,"role"],[77,14,60,12],[77,16,60,14],[78,8,61,6],[78,9,61,7],[78,10,61,8],[79,8,63,6],[79,14,63,12],[80,10,63,14,"access_token"],[80,22,63,26],[81,10,63,28,"user_id"],[82,8,63,36],[82,9,63,37],[82,12,63,40,"response"],[82,20,63,48],[82,21,63,49,"data"],[82,25,63,53],[83,8,64,6],[83,14,64,12,"AsyncStorage"],[83,26,64,24],[83,27,64,24,"default"],[83,34,64,24],[83,35,64,25,"setItem"],[83,42,64,32],[83,43,64,33],[83,55,64,45],[83,57,64,47,"access_token"],[83,69,64,59],[83,70,64,60],[84,8,66,6,"setToken"],[84,16,66,14],[84,17,66,15,"access_token"],[84,29,66,27],[84,30,66,28],[85,8,67,6,"setUser"],[85,15,67,13],[85,16,67,14],[86,10,67,16,"id"],[86,12,67,18],[86,14,67,20,"user_id"],[86,21,67,27],[87,10,67,29,"email"],[87,15,67,34],[88,10,67,36,"name"],[88,14,67,40],[89,10,67,42,"role"],[89,14,67,46],[89,16,67,48],[89,22,67,54],[90,10,67,56,"loyalty_points"],[90,24,67,70],[90,26,67,72],[90,27,67,73],[91,10,67,75,"badges"],[91,16,67,81],[91,18,67,83],[92,8,67,86],[92,9,67,87],[92,10,67,88],[93,8,68,6,"setIsAuthenticated"],[93,26,68,24],[93,27,68,25],[93,31,68,29],[93,32,68,30],[94,6,69,4],[94,7,69,5],[94,8,69,6],[94,15,69,13,"error"],[94,20,69,23],[94,22,69,25],[95,8,70,6],[95,14,70,12],[95,18,70,16,"Error"],[95,23,70,21],[95,24,70,22,"error"],[95,29,70,27],[95,30,70,28,"response"],[95,38,70,36],[95,40,70,38,"data"],[95,44,70,42],[95,46,70,44,"detail"],[95,52,70,50],[95,56,70,54],[95,77,70,75],[95,78,70,76],[96,6,71,4],[96,7,71,5],[96,16,71,14],[97,8,72,6,"setIsLoading"],[97,20,72,18],[97,21,72,19],[97,26,72,24],[97,27,72,25],[98,6,73,4],[99,4,74,2],[99,5,74,3],[100,4,76,2],[100,10,76,8,"logout"],[100,16,76,14],[100,19,76,17],[100,25,76,17,"logout"],[100,26,76,17],[100,31,76,29],[101,6,77,4],[101,12,77,10,"AsyncStorage"],[101,24,77,22],[101,25,77,22,"default"],[101,32,77,22],[101,33,77,23,"removeItem"],[101,43,77,33],[101,44,77,34],[101,56,77,46],[101,57,77,47],[102,6,78,4,"setUser"],[102,13,78,11],[102,14,78,12],[102,18,78,16],[102,19,78,17],[103,6,79,4,"setToken"],[103,14,79,12],[103,15,79,13],[103,19,79,17],[103,20,79,18],[104,6,80,4,"setIsAuthenticated"],[104,24,80,22],[104,25,80,23],[104,30,80,28],[104,31,80,29],[105,4,81,2],[105,5,81,3],[106,4,83,2],[106,10,83,8,"loadUser"],[106,18,83,16],[106,21,83,19],[106,27,83,19,"loadUser"],[106,28,83,19],[106,33,83,31],[107,6,84,4],[107,10,84,8],[108,8,85,6],[108,14,85,12,"storedToken"],[108,25,85,23],[108,28,85,26],[108,34,85,32,"AsyncStorage"],[108,46,85,44],[108,47,85,44,"default"],[108,54,85,44],[108,55,85,45,"getItem"],[108,62,85,52],[108,63,85,53],[108,75,85,65],[108,76,85,66],[109,8,86,6],[109,12,86,10],[109,13,86,11,"storedToken"],[109,24,86,22],[109,26,86,24],[110,10,87,8,"setIsAuthenticated"],[110,28,87,26],[110,29,87,27],[110,34,87,32],[110,35,87,33],[111,10,88,8,"setIsLoading"],[111,22,88,20],[111,23,88,21],[111,28,88,26],[111,29,88,27],[112,10,89,8],[113,8,90,6],[114,8,92,6,"setIsLoading"],[114,20,92,18],[114,21,92,19],[114,25,92,23],[114,26,92,24],[115,8,93,6],[115,14,93,12,"response"],[115,22,93,20],[115,25,93,23],[115,31,93,29,"api"],[115,34,93,32],[115,35,93,32,"default"],[115,42,93,32],[115,43,93,33,"get"],[115,46,93,36],[115,47,93,37],[115,57,93,47],[115,58,93,48],[116,8,95,6,"setUser"],[116,15,95,13],[116,16,95,14,"response"],[116,24,95,22],[116,25,95,23,"data"],[116,29,95,27],[116,30,95,28],[117,8,96,6,"setToken"],[117,16,96,14],[117,17,96,15,"storedToken"],[117,28,96,26],[117,29,96,27],[118,8,97,6,"setIsAuthenticated"],[118,26,97,24],[118,27,97,25],[118,31,97,29],[118,32,97,30],[119,6,98,4],[119,7,98,5],[119,8,98,6],[119,15,98,13,"error"],[119,20,98,18],[119,22,98,20],[120,8,99,6],[120,14,99,12,"AsyncStorage"],[120,26,99,24],[120,27,99,24,"default"],[120,34,99,24],[120,35,99,25,"removeItem"],[120,45,99,35],[120,46,99,36],[120,58,99,48],[120,59,99,49],[121,8,100,6,"setUser"],[121,15,100,13],[121,16,100,14],[121,20,100,18],[121,21,100,19],[122,8,101,6,"setToken"],[122,16,101,14],[122,17,101,15],[122,21,101,19],[122,22,101,20],[123,8,102,6,"setIsAuthenticated"],[123,26,102,24],[123,27,102,25],[123,32,102,30],[123,33,102,31],[124,6,103,4],[124,7,103,5],[124,16,103,14],[125,8,104,6,"setIsLoading"],[125,20,104,18],[125,21,104,19],[125,26,104,24],[125,27,104,25],[126,6,105,4],[127,4,106,2],[127,5,106,3],[128,4,108,2],[128,8,108,2,"useEffect"],[128,14,108,11],[128,15,108,11,"useEffect"],[128,24,108,11],[128,26,108,12],[128,32,108,18],[129,6,109,4,"loadUser"],[129,14,109,12],[129,15,109,13],[129,16,109,14],[130,4,110,2],[130,5,110,3],[130,7,110,5],[130,9,110,7],[130,10,110,8],[131,4,112,2],[131,24,113,4],[131,28,113,4,"_reactJsxDevRuntime"],[131,47,113,4],[131,48,113,4,"jsxDEV"],[131,54,113,4],[131,56,113,5,"AuthContext"],[131,67,113,16],[131,68,113,17,"Provider"],[131,76,113,25],[132,6,114,6,"value"],[132,11,114,11],[132,13,114,13],[133,8,115,8,"user"],[133,12,115,12],[134,8,116,8,"token"],[134,13,116,13],[135,8,117,8,"isLoading"],[135,17,117,17],[136,8,118,8,"isAuthenticated"],[136,23,118,23],[137,8,119,8,"login"],[137,13,119,13],[138,8,120,8,"register"],[138,16,120,16],[139,8,121,8,"logout"],[139,14,121,14],[140,8,122,8,"loadUser"],[141,6,123,6],[141,7,123,8],[142,6,123,8,"children"],[142,14,123,8],[142,16,125,7,"children"],[143,4,125,15],[144,6,125,15,"fileName"],[144,14,125,15],[144,16,125,15,"_jsxFileName"],[144,28,125,15],[145,6,125,15,"lineNumber"],[145,16,125,15],[146,6,125,15,"columnNumber"],[146,18,125,15],[147,4,125,15],[147,11,126,26],[147,12,126,27],[148,2,128,0],[148,3,128,1],[149,2,130,7],[149,8,130,13,"useAuth"],[149,15,130,20],[149,18,130,23,"useAuth"],[149,19,130,23],[149,24,130,29],[150,4,131,2],[150,10,131,8,"context"],[150,17,131,15],[150,20,131,18],[150,24,131,18,"useContext"],[150,30,131,28],[150,31,131,28,"useContext"],[150,41,131,28],[150,43,131,29,"AuthContext"],[150,54,131,40],[150,55,131,41],[151,4,132,2],[151,8,132,6,"context"],[151,15,132,13],[151,20,132,18,"undefined"],[151,29,132,27],[151,31,132,29],[152,6,133,4],[152,12,133,10],[152,16,133,14,"Error"],[152,21,133,19],[152,22,133,20],[152,67,133,65],[152,68,133,66],[153,4,134,2],[154,4,135,2],[154,11,135,9,"context"],[154,18,135,16],[155,2,136,0],[155,3,136,1],[156,0,136,2],[156,3]],"functionMap":{"names":["<global>","AuthProvider","login","register","logout","loadUser","useEffect$argument_0","useAuth"],"mappings":"AAA;qEC0B;gBCM;GDkB;mBEE;GFqB;iBGE;GHK;mBIE;GJuB;YKE;GLE;CDkB;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}