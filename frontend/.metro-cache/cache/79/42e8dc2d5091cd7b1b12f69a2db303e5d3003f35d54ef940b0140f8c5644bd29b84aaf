{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":26,"index":26}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":27},"end":{"line":2,"column":39,"index":66}}],"key":"pPv5KzfRT0rL6NCr7G9k0o4d1W8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":67},"end":{"line":3,"column":69,"index":136}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"api\", {\n    enumerable: true,\n    get: function () {\n      return api;\n    }\n  });\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoConstants = require(_dependencyMap[2], \"expo-constants\");\n  var Constants = _interopDefault(_expoConstants);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[3], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  // Get backend URL from environment\n  // Try multiple sources for the backend URL\n  const getBackendUrl = () => {\n    // 1. Try process.env (EAS Build environment variables)\n    if (_expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL) {\n      return _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL;\n    }\n\n    // 2. Try Constants.expoConfig.extra\n    if (Constants.default.expoConfig?.extra?.EXPO_PUBLIC_BACKEND_URL) {\n      return Constants.default.expoConfig.extra.EXPO_PUBLIC_BACKEND_URL;\n    }\n\n    // 3. Fallback to hardcoded URL for production\n    return 'https://guest-access-beta.preview.emergentagent.com';\n  };\n  const BACKEND_URL = getBackendUrl();\n  console.log('API Config - Backend URL:', BACKEND_URL);\n\n  // Create axios instance\n  const api = axios.default.create({\n    baseURL: `${BACKEND_URL}/api`,\n    timeout: 30000,\n    // 30 secondes au lieu de 10\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n\n  // Add auth token to requests\n  api.interceptors.request.use(async config => {\n    const token = await AsyncStorage.default.getItem('auth_token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n\n  // Handle response errors\n  api.interceptors.response.use(response => response, async error => {\n    if (error.response?.status === 401) {\n      // Token expired or invalid\n      await AsyncStorage.default.removeItem('auth_token');\n      // Redirect to login\n    }\n    return Promise.reject(error);\n  });\n  var _default = api;\n});","lineCount":81,"map":[[12,2,62,0,"Object"],[12,8,62,0],[12,9,62,0,"defineProperty"],[12,23,62,0],[12,24,62,0,"exports"],[12,31,62,0],[13,4,62,0,"enumerable"],[13,14,62,0],[14,4,62,0,"get"],[14,7,62,0],[14,18,62,0,"get"],[14,19,62,0],[15,6,62,0],[15,13,62,0,"_default"],[15,21,62,0],[16,4,62,0],[17,2,62,0],[18,2,27,0,"Object"],[18,8,27,0],[18,9,27,0,"defineProperty"],[18,23,27,0],[18,24,27,0,"exports"],[18,31,27,0],[19,4,27,0,"enumerable"],[19,14,27,0],[20,4,27,0,"get"],[20,7,27,0],[20,18,27,0,"get"],[20,19,27,0],[21,6,27,0],[21,13,27,0,"api"],[21,16,27,0],[22,4,27,0],[23,2,27,0],[24,2,33,3],[24,6,33,3,"_expoVirtualEnv"],[24,21,33,3],[24,24,33,3,"require"],[24,31,33,3],[24,32,33,3,"_dependencyMap"],[24,46,33,3],[25,2,1,0],[25,6,1,0,"_axios"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,1,0],[26,6,1,0,"axios"],[26,11,1,0],[26,14,1,0,"_interopDefault"],[26,29,1,0],[26,30,1,0,"_axios"],[26,36,1,0],[27,2,2,0],[27,6,2,0,"_expoConstants"],[27,20,2,0],[27,23,2,0,"require"],[27,30,2,0],[27,31,2,0,"_dependencyMap"],[27,45,2,0],[28,2,2,0],[28,6,2,0,"Constants"],[28,15,2,0],[28,18,2,0,"_interopDefault"],[28,33,2,0],[28,34,2,0,"_expoConstants"],[28,48,2,0],[29,2,3,0],[29,6,3,0,"_reactNativeAsyncStorageAsyncStorage"],[29,42,3,0],[29,45,3,0,"require"],[29,52,3,0],[29,53,3,0,"_dependencyMap"],[29,67,3,0],[30,2,3,0],[30,6,3,0,"AsyncStorage"],[30,18,3,0],[30,21,3,0,"_interopDefault"],[30,36,3,0],[30,37,3,0,"_reactNativeAsyncStorageAsyncStorage"],[30,73,3,0],[31,2,5,0],[32,2,6,0],[33,2,7,0],[33,8,7,6,"getBackendUrl"],[33,21,7,19],[33,24,7,22,"getBackendUrl"],[33,25,7,22],[33,30,7,28],[34,4,8,2],[35,4,9,2],[35,8,9,2,"_expoVirtualEnv"],[35,23,9,2],[35,24,9,2,"env"],[35,27,9,2],[35,28,9,2,"EXPO_PUBLIC_BACKEND_URL"],[35,51,9,2],[35,53,9,43],[36,6,10,4],[36,13,10,4,"_expoVirtualEnv"],[36,28,10,4],[36,29,10,4,"env"],[36,32,10,4],[36,33,10,4,"EXPO_PUBLIC_BACKEND_URL"],[36,56,10,4],[37,4,11,2],[39,4,13,2],[40,4,14,2],[40,8,14,6,"Constants"],[40,17,14,15],[40,18,14,15,"default"],[40,25,14,15],[40,26,14,16,"expoConfig"],[40,36,14,26],[40,38,14,28,"extra"],[40,43,14,33],[40,45,14,35,"EXPO_PUBLIC_BACKEND_URL"],[40,68,14,58],[40,70,14,60],[41,6,15,4],[41,13,15,11,"Constants"],[41,22,15,20],[41,23,15,20,"default"],[41,30,15,20],[41,31,15,21,"expoConfig"],[41,41,15,31],[41,42,15,32,"extra"],[41,47,15,37],[41,48,15,38,"EXPO_PUBLIC_BACKEND_URL"],[41,71,15,61],[42,4,16,2],[44,4,18,2],[45,4,19,2],[45,11,19,9],[45,64,19,62],[46,2,20,0],[46,3,20,1],[47,2,22,0],[47,8,22,6,"BACKEND_URL"],[47,19,22,17],[47,22,22,20,"getBackendUrl"],[47,35,22,33],[47,36,22,34],[47,37,22,35],[48,2,24,0,"console"],[48,9,24,7],[48,10,24,8,"log"],[48,13,24,11],[48,14,24,12],[48,41,24,39],[48,43,24,41,"BACKEND_URL"],[48,54,24,52],[48,55,24,53],[50,2,26,0],[51,2,27,7],[51,8,27,13,"api"],[51,11,27,16],[51,14,27,19,"axios"],[51,19,27,24],[51,20,27,24,"default"],[51,27,27,24],[51,28,27,25,"create"],[51,34,27,31],[51,35,27,32],[52,4,28,2,"baseURL"],[52,11,28,9],[52,13,28,11],[52,16,28,14,"BACKEND_URL"],[52,27,28,25],[52,33,28,31],[53,4,29,2,"timeout"],[53,11,29,9],[53,13,29,11],[53,18,29,16],[54,4,29,18],[55,4,30,2,"headers"],[55,11,30,9],[55,13,30,11],[56,6,31,4],[56,20,31,18],[56,22,31,20],[57,4,32,2],[58,2,33,0],[58,3,33,1],[58,4,33,2],[60,2,35,0],[61,2,36,0,"api"],[61,5,36,3],[61,6,36,4,"interceptors"],[61,18,36,16],[61,19,36,17,"request"],[61,26,36,24],[61,27,36,25,"use"],[61,30,36,28],[61,31,37,2],[61,37,37,9,"config"],[61,43,37,15],[61,47,37,20],[62,4,38,4],[62,10,38,10,"token"],[62,15,38,15],[62,18,38,18],[62,24,38,24,"AsyncStorage"],[62,36,38,36],[62,37,38,36,"default"],[62,44,38,36],[62,45,38,37,"getItem"],[62,52,38,44],[62,53,38,45],[62,65,38,57],[62,66,38,58],[63,4,39,4],[63,8,39,8,"token"],[63,13,39,13],[63,15,39,15],[64,6,40,6,"config"],[64,12,40,12],[64,13,40,13,"headers"],[64,20,40,20],[64,21,40,21,"Authorization"],[64,34,40,34],[64,37,40,37],[64,47,40,47,"token"],[64,52,40,52],[64,54,40,54],[65,4,41,4],[66,4,42,4],[66,11,42,11,"config"],[66,17,42,17],[67,2,43,2],[67,3,43,3],[67,5,44,3,"error"],[67,10,44,8],[67,14,44,13],[68,4,45,4],[68,11,45,11,"Promise"],[68,18,45,18],[68,19,45,19,"reject"],[68,25,45,25],[68,26,45,26,"error"],[68,31,45,31],[68,32,45,32],[69,2,46,2],[69,3,47,0],[69,4,47,1],[71,2,49,0],[72,2,50,0,"api"],[72,5,50,3],[72,6,50,4,"interceptors"],[72,18,50,16],[72,19,50,17,"response"],[72,27,50,25],[72,28,50,26,"use"],[72,31,50,29],[72,32,51,3,"response"],[72,40,51,11],[72,44,51,16,"response"],[72,52,51,24],[72,54,52,2],[72,60,52,9,"error"],[72,65,52,14],[72,69,52,19],[73,4,53,4],[73,8,53,8,"error"],[73,13,53,13],[73,14,53,14,"response"],[73,22,53,22],[73,24,53,24,"status"],[73,30,53,30],[73,35,53,35],[73,38,53,38],[73,40,53,40],[74,6,54,6],[75,6,55,6],[75,12,55,12,"AsyncStorage"],[75,24,55,24],[75,25,55,24,"default"],[75,32,55,24],[75,33,55,25,"removeItem"],[75,43,55,35],[75,44,55,36],[75,56,55,48],[75,57,55,49],[76,6,56,6],[77,4,57,4],[78,4,58,4],[78,11,58,11,"Promise"],[78,18,58,18],[78,19,58,19,"reject"],[78,25,58,25],[78,26,58,26,"error"],[78,31,58,31],[78,32,58,32],[79,2,59,2],[79,3,60,0],[79,4,60,1],[80,2,62,0],[80,6,62,0,"_default"],[80,14,62,0],[80,17,62,15,"api"],[80,20,62,18],[81,0,62,19],[81,3]],"functionMap":{"names":["<global>","getBackendUrl","interceptors.request.use$argument_0","interceptors.request.use$argument_1","interceptors.response.use$argument_0","interceptors.response.use$argument_1"],"mappings":"AAA;sBCM;CDa;EEiB;GFM;EGC;GHE;EIK,sBJ;EKC;GLO"},"hasCjsExports":false},"type":"js/module"}]}